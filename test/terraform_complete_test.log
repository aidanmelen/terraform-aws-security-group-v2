=== RUN   TestTerraformCompleteExample
TestTerraformCompleteExample 2022-08-24T14:34:38Z retry.go:91: terraform [init -upgrade=false]
TestTerraformCompleteExample 2022-08-24T14:34:38Z logger.go:66: Running command terraform with args [init -upgrade=false]
TestTerraformCompleteExample 2022-08-24T14:34:38Z logger.go:66: [0m[1mInitializing modules...[0m
TestTerraformCompleteExample 2022-08-24T14:34:38Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:38Z logger.go:66: [0m[1mInitializing the backend...[0m
TestTerraformCompleteExample 2022-08-24T14:34:39Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:39Z logger.go:66: [0m[1mInitializing provider plugins...[0m
TestTerraformCompleteExample 2022-08-24T14:34:39Z logger.go:66: - Reusing previous version of hashicorp/aws from the dependency lock file
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: - Using previously-installed hashicorp/aws v4.27.0
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: [0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: [0m[32m
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: You may now begin working with Terraform. Try running "terraform plan" to see
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: any changes that are required for your infrastructure. All Terraform commands
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: should now work.
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: If you ever set or change modules or backend configuration for Terraform,
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: rerun this command to reinitialize your working directory. If you forget, other
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: commands will detect it and remind you to do so if necessary.[0m
TestTerraformCompleteExample 2022-08-24T14:34:40Z retry.go:91: terraform [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformCompleteExample 2022-08-24T14:34:40Z logger.go:66: Running command terraform with args [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:   44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:42Z retry.go:99: Returning due to fatal error: FatalError{Underlying: error while running command: exit status 1;
Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_https_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_https_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_https_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_https_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_http_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_http_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_http_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
    apply.go:15:
        	Error Trace:	/workspaces/terraform-aws-security-group/test/apply.go:15
        	            				/workspaces/terraform-aws-security-group/test/terraform_complete_test.go:23
        	Error:      	Received unexpected error:
        	            	FatalError{Underlying: error while running command: exit status 1;
        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
        	            	  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_https_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_https_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
        	            	  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_https_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_https_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
        	            	  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_http_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_http_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
        	            	  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_http_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
        	Test:       	TestTerraformCompleteExample
TestTerraformCompleteExample 2022-08-24T14:34:42Z retry.go:91: terraform [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformCompleteExample 2022-08-24T14:34:42Z logger.go:66: Running command terraform with args [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:   44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66:
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: An input variable with the name
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" has not been
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformCompleteExample 2022-08-24T14:34:44Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" {} block.
TestTerraformCompleteExample 2022-08-24T14:34:44Z retry.go:99: Returning due to fatal error: FatalError{Underlying: error while running command: exit status 1;
Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_https_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_https_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_https_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_https_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_http_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_http_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_http_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
    destroy.go:11:
        	Error Trace:	/workspaces/terraform-aws-security-group/test/destroy.go:11
        	            				/workspaces/terraform-aws-security-group/test/panic.go:642
        	            				/workspaces/terraform-aws-security-group/test/testing.go:756
        	            				/workspaces/terraform-aws-security-group/test/apply.go:15
        	            				/workspaces/terraform-aws-security-group/test/terraform_complete_test.go:23
        	Error:      	Received unexpected error:
        	            	FatalError{Underlying: error while running command: exit status 1;
        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
        	            	  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_https_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_https_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
        	            	  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_https_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_https_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
        	            	  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_http_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_http_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
        	            	  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_http_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
        	Test:       	TestTerraformCompleteExample
--- FAIL: TestTerraformCompleteExample (6.18s)
FAIL
FAIL	command-line-arguments	6.199s
FAIL
