=== RUN   TestTerraformBasicExample
TestTerraformBasicExample 2022-08-24T14:34:31Z retry.go:91: terraform [init -upgrade=false]
TestTerraformBasicExample 2022-08-24T14:34:31Z logger.go:66: Running command terraform with args [init -upgrade=false]
TestTerraformBasicExample 2022-08-24T14:34:31Z logger.go:66: [0m[1mInitializing modules...[0m
TestTerraformBasicExample 2022-08-24T14:34:31Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:31Z logger.go:66: [0m[1mInitializing the backend...[0m
TestTerraformBasicExample 2022-08-24T14:34:32Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:32Z logger.go:66: [0m[1mInitializing provider plugins...[0m
TestTerraformBasicExample 2022-08-24T14:34:32Z logger.go:66: - Reusing previous version of hashicorp/aws from the dependency lock file
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: - Using previously-installed hashicorp/aws v4.27.0
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: [0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: [0m[32m
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: You may now begin working with Terraform. Try running "terraform plan" to see
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: any changes that are required for your infrastructure. All Terraform commands
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: should now work.
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: If you ever set or change modules or backend configuration for Terraform,
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: rerun this command to reinitialize your working directory. If you forget, other
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: commands will detect it and remind you to do so if necessary.[0m
TestTerraformBasicExample 2022-08-24T14:34:33Z retry.go:91: terraform [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformBasicExample 2022-08-24T14:34:33Z logger.go:66: Running command terraform with args [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:   on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:   26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: An input variable with the name
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" has not been
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" {} block.
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:   on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:   44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: An input variable with the name
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" has not been
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" {} block.
TestTerraformBasicExample 2022-08-24T14:34:35Z retry.go:99: Returning due to fatal error: FatalError{Underlying: error while running command: exit status 1;
Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_https_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_https_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_http_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
    apply.go:15:
        	Error Trace:	/workspaces/terraform-aws-security-group/test/apply.go:15
        	            				/workspaces/terraform-aws-security-group/test/terraform_basic_test.go:23
        	Error:      	Received unexpected error:
        	            	FatalError{Underlying: error while running command: exit status 1;
        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
        	            	  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_https_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_https_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
        	            	  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_http_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
        	Test:       	TestTerraformBasicExample
TestTerraformBasicExample 2022-08-24T14:34:35Z retry.go:91: terraform [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformBasicExample 2022-08-24T14:34:35Z logger.go:66: Running command terraform with args [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:   on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:   26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: An input variable with the name
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" has not been
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: "create_auto_group_ingress_https_from_public_internet_rules" {} block.
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: Error: Reference to undeclared input variable
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:   on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:   44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66:
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: An input variable with the name
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" has not been
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: declared. This variable can be declared with a variable
TestTerraformBasicExample 2022-08-24T14:34:36Z logger.go:66: "create_auto_group_ingress_http_from_public_internet_rules" {} block.
TestTerraformBasicExample 2022-08-24T14:34:36Z retry.go:99: Returning due to fatal error: FatalError{Underlying: error while running command: exit status 1;
Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_https_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_https_from_public_internet_rules" {} block.

Error: Reference to undeclared input variable

  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

An input variable with the name
"create_auto_group_ingress_http_from_public_internet_rules" has not been
declared. This variable can be declared with a variable
"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
    destroy.go:11:
        	Error Trace:	/workspaces/terraform-aws-security-group/test/destroy.go:11
        	            				/workspaces/terraform-aws-security-group/test/panic.go:642
        	            				/workspaces/terraform-aws-security-group/test/testing.go:756
        	            				/workspaces/terraform-aws-security-group/test/apply.go:15
        	            				/workspaces/terraform-aws-security-group/test/terraform_basic_test.go:23
        	Error:      	Received unexpected error:
        	            	FatalError{Underlying: error while running command: exit status 1;
        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 26, in resource "aws_security_group_rule" "auto_group_ingress_https_from_public_internet_rules":
        	            	  26:   for_each = var.create && var.create_auto_group_ingress_https_from_public_internet_rules ? { "ingress-https-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_https_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_https_from_public_internet_rules" {} block.

        	            	Error: Reference to undeclared input variable

        	            	  on ../../auto_group_rules.tf line 44, in resource "aws_security_group_rule" "auto_group_ingress_http_from_public_internet_rules":
        	            	  44:   for_each = var.create && var.create_auto_group_ingress_http_from_public_internet_rules ? { "ingress-http-443-tcp-from-public-internet" = null } : {}

        	            	An input variable with the name
        	            	"create_auto_group_ingress_http_from_public_internet_rules" has not been
        	            	declared. This variable can be declared with a variable
        	            	"create_auto_group_ingress_http_from_public_internet_rules" {} block.}
        	Test:       	TestTerraformBasicExample
--- FAIL: TestTerraformBasicExample (5.93s)
FAIL
FAIL	command-line-arguments	5.944s
FAIL
