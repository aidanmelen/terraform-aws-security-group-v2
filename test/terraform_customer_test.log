=== RUN   TestTerraformCustomerRulesExample
TestTerraformCustomerRulesExample 2022-08-28T18:02:01Z retry.go:91: terraform [init -upgrade=false]
TestTerraformCustomerRulesExample 2022-08-28T18:02:01Z logger.go:66: Running command terraform with args [init -upgrade=false]
TestTerraformCustomerRulesExample 2022-08-28T18:02:01Z logger.go:66: [0m[1mInitializing modules...[0m
TestTerraformCustomerRulesExample 2022-08-28T18:02:01Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:01Z logger.go:66: [0m[1mInitializing the backend...[0m
TestTerraformCustomerRulesExample 2022-08-28T18:02:02Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:02Z logger.go:66: [0m[1mInitializing provider plugins...[0m
TestTerraformCustomerRulesExample 2022-08-28T18:02:02Z logger.go:66: - Reusing previous version of hashicorp/aws from the dependency lock file
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: - Using previously-installed hashicorp/aws v4.27.0
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: [0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: [0m[32m
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: You may now begin working with Terraform. Try running "terraform plan" to see
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: any changes that are required for your infrastructure. All Terraform commands
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: should now work.
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: If you ever set or change modules or backend configuration for Terraform,
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: rerun this command to reinitialize your working directory. If you forget, other
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: commands will detect it and remind you to do so if necessary.[0m
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z retry.go:91: terraform [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformCustomerRulesExample 2022-08-28T18:02:03Z logger.go:66: Running command terraform with args [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformCustomerRulesExample 2022-08-28T18:02:06Z logger.go:66: data.aws_vpc.default: Reading...
TestTerraformCustomerRulesExample 2022-08-28T18:02:06Z logger.go:66: data.aws_prefix_list.private_s3: Reading...
TestTerraformCustomerRulesExample 2022-08-28T18:02:06Z logger.go:66: data.aws_prefix_list.private_s3: Read complete after 1s [id=pl-1111111111111111]
TestTerraformCustomerRulesExample 2022-08-28T18:02:06Z logger.go:66: data.aws_vpc.default: Read complete after 1s [id=vpc-1111111111111111]
TestTerraformCustomerRulesExample 2022-08-28T18:02:06Z logger.go:66: data.aws_security_group.default: Reading...
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: data.aws_security_group.default: Read complete after 0s [id=sg-1111111111111111]
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   40:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   43:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   44:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   40:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   43:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   44:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   45:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   48:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   49:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "ipv6_cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   45:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   48:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   49:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "ipv6_cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 55, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   55:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "self": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 56, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   56:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "source_security_group_id": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   68:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   71:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   72:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   68:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   71:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   72:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   73:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   76:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   77:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "ipv6_cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   73:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   76:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   77:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "ipv6_cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 83, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   83:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "self": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   on ../../main.tf line 84, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:   84:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: "source_security_group_id": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z retry.go:99: Returning due to fatal error: FatalError{Underlying: error while running command: exit status 1;
Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
  40:   cidr_blocks              = try(
  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  43:     null
  44:   )

"cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
  40:   cidr_blocks              = try(
  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  43:     null
  44:   )

"cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
  45:   ipv6_cidr_blocks         = try(
  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  48:     null
  49:   )

"ipv6_cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
  45:   ipv6_cidr_blocks         = try(
  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  48:     null
  49:   )

"ipv6_cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
  on ../../main.tf line 55, in resource "aws_security_group_rule" "ingress":
  55:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

"self": conflicts with cidr_blocks

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 56, in resource "aws_security_group_rule" "ingress":
  56:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

"source_security_group_id": conflicts with cidr_blocks

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
  68:   cidr_blocks              = try(
  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  71:     null
  72:   )

"cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
  68:   cidr_blocks              = try(
  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  71:     null
  72:   )

"cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
  73:   ipv6_cidr_blocks         = try(
  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  76:     null
  77:   )

"ipv6_cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
  73:   ipv6_cidr_blocks         = try(
  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  76:     null
  77:   )

"ipv6_cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
  on ../../main.tf line 83, in resource "aws_security_group_rule" "egress":
  83:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

"self": conflicts with cidr_blocks

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 84, in resource "aws_security_group_rule" "egress":
  84:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

"source_security_group_id": conflicts with cidr_blocks}
    apply.go:15:
        	Error Trace:	/workspaces/terraform-aws-security-group-v2/test/apply.go:15
        	            				/workspaces/terraform-aws-security-group-v2/test/terraform_customer_test.go:25
        	Error:      	Received unexpected error:
        	            	FatalError{Underlying: error while running command: exit status 1;
        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
        	            	  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
        	            	  40:   cidr_blocks              = try(
        	            	  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  43:     null
        	            	  44:   )

        	            	"cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
        	            	  40:   cidr_blocks              = try(
        	            	  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  43:     null
        	            	  44:   )

        	            	"cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
        	            	  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
        	            	  45:   ipv6_cidr_blocks         = try(
        	            	  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  48:     null
        	            	  49:   )

        	            	"ipv6_cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
        	            	  45:   ipv6_cidr_blocks         = try(
        	            	  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  48:     null
        	            	  49:   )

        	            	"ipv6_cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
        	            	  on ../../main.tf line 55, in resource "aws_security_group_rule" "ingress":
        	            	  55:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

        	            	"self": conflicts with cidr_blocks

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 56, in resource "aws_security_group_rule" "ingress":
        	            	  56:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

        	            	"source_security_group_id": conflicts with cidr_blocks

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
        	            	  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
        	            	  68:   cidr_blocks              = try(
        	            	  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  71:     null
        	            	  72:   )

        	            	"cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
        	            	  68:   cidr_blocks              = try(
        	            	  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  71:     null
        	            	  72:   )

        	            	"cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
        	            	  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
        	            	  73:   ipv6_cidr_blocks         = try(
        	            	  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  76:     null
        	            	  77:   )

        	            	"ipv6_cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
        	            	  73:   ipv6_cidr_blocks         = try(
        	            	  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  76:     null
        	            	  77:   )

        	            	"ipv6_cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
        	            	  on ../../main.tf line 83, in resource "aws_security_group_rule" "egress":
        	            	  83:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

        	            	"self": conflicts with cidr_blocks

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 84, in resource "aws_security_group_rule" "egress":
        	            	  84:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

        	            	"source_security_group_id": conflicts with cidr_blocks}
        	Test:       	TestTerraformCustomerRulesExample
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z retry.go:91: terraform [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformCustomerRulesExample 2022-08-28T18:02:07Z logger.go:66: Running command terraform with args [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: data.aws_prefix_list.private_s3: Reading...
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: data.aws_vpc.default: Reading...
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: data.aws_prefix_list.private_s3: Read complete after 0s [id=pl-1111111111111111]
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: data.aws_vpc.default: Read complete after 1s [id=vpc-1111111111111111]
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: data.aws_security_group.default: Reading...
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: data.aws_security_group.default: Read complete after 0s [id=sg-1111111111111111]
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   40:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   43:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   44:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   40:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   43:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   44:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   45:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   48:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   49:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "ipv6_cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   45:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   48:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   49:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "ipv6_cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 55, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   55:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "self": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 56, in resource "aws_security_group_rule" "ingress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   56:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "source_security_group_id": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   68:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   71:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   72:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   68:   cidr_blocks              = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   71:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   72:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   73:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   76:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   77:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "ipv6_cidr_blocks": conflicts with self
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   73:   ipv6_cidr_blocks         = try(
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   76:     null
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   77:   )
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "ipv6_cidr_blocks": conflicts with source_security_group_id
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 83, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   83:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "self": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: Error: Conflicting configuration arguments
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   on ../../main.tf line 84, in resource "aws_security_group_rule" "egress":
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:   84:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66:
TestTerraformCustomerRulesExample 2022-08-28T18:02:10Z logger.go:66: "source_security_group_id": conflicts with cidr_blocks
TestTerraformCustomerRulesExample 2022-08-28T18:02:11Z retry.go:99: Returning due to fatal error: FatalError{Underlying: error while running command: exit status 1;
Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
  40:   cidr_blocks              = try(
  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  43:     null
  44:   )

"cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
  40:   cidr_blocks              = try(
  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  43:     null
  44:   )

"cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
  45:   ipv6_cidr_blocks         = try(
  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  48:     null
  49:   )

"ipv6_cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
  45:   ipv6_cidr_blocks         = try(
  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  48:     null
  49:   )

"ipv6_cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
  on ../../main.tf line 55, in resource "aws_security_group_rule" "ingress":
  55:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

"self": conflicts with cidr_blocks

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 56, in resource "aws_security_group_rule" "ingress":
  56:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

"source_security_group_id": conflicts with cidr_blocks

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
  68:   cidr_blocks              = try(
  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  71:     null
  72:   )

"cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
  68:   cidr_blocks              = try(
  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
  71:     null
  72:   )

"cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
  73:   ipv6_cidr_blocks         = try(
  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  76:     null
  77:   )

"ipv6_cidr_blocks": conflicts with self

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
  73:   ipv6_cidr_blocks         = try(
  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
  76:     null
  77:   )

"ipv6_cidr_blocks": conflicts with source_security_group_id

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
  on ../../main.tf line 83, in resource "aws_security_group_rule" "egress":
  83:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

"self": conflicts with cidr_blocks

Error: Conflicting configuration arguments

  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
  on ../../main.tf line 84, in resource "aws_security_group_rule" "egress":
  84:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

"source_security_group_id": conflicts with cidr_blocks}
    destroy.go:11:
        	Error Trace:	/workspaces/terraform-aws-security-group-v2/test/destroy.go:11
        	            				/workspaces/terraform-aws-security-group-v2/test/panic.go:642
        	            				/workspaces/terraform-aws-security-group-v2/test/testing.go:756
        	            				/workspaces/terraform-aws-security-group-v2/test/apply.go:15
        	            				/workspaces/terraform-aws-security-group-v2/test/terraform_customer_test.go:25
        	Error:      	Received unexpected error:
        	            	FatalError{Underlying: error while running command: exit status 1;
        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
        	            	  40:   cidr_blocks              = try(
        	            	  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  43:     null
        	            	  44:   )

        	            	"cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
        	            	  on ../../main.tf line 40, in resource "aws_security_group_rule" "ingress":
        	            	  40:   cidr_blocks              = try(
        	            	  41:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  42:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  43:     null
        	            	  44:   )

        	            	"cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
        	            	  45:   ipv6_cidr_blocks         = try(
        	            	  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  48:     null
        	            	  49:   )

        	            	"ipv6_cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
        	            	  on ../../main.tf line 45, in resource "aws_security_group_rule" "ingress":
        	            	  45:   ipv6_cidr_blocks         = try(
        	            	  46:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  47:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  48:     null
        	            	  49:   )

        	            	"ipv6_cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0--1-true-0"],
        	            	  on ../../main.tf line 55, in resource "aws_security_group_rule" "ingress":
        	            	  55:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

        	            	"self": conflicts with cidr_blocks

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.ingress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 56, in resource "aws_security_group_rule" "ingress":
        	            	  56:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

        	            	"source_security_group_id": conflicts with cidr_blocks

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
        	            	  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
        	            	  68:   cidr_blocks              = try(
        	            	  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  71:     null
        	            	  72:   )

        	            	"cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 68, in resource "aws_security_group_rule" "egress":
        	            	  68:   cidr_blocks              = try(
        	            	  69:     distinct(concat(lookup(each.value, "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  70:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "cidr_blocks", []), var.default_cidr_blocks)),
        	            	  71:     null
        	            	  72:   )

        	            	"cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
        	            	  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
        	            	  73:   ipv6_cidr_blocks         = try(
        	            	  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  76:     null
        	            	  77:   )

        	            	"ipv6_cidr_blocks": conflicts with self

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 73, in resource "aws_security_group_rule" "egress":
        	            	  73:   ipv6_cidr_blocks         = try(
        	            	  74:     distinct(concat(lookup(each.value, "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  75:     distinct(concat(lookup(local.rules[lookup(each.value, "rule")], "ipv6_cidr_blocks", []), var.default_ipv6_cidr_blocks)),
        	            	  76:     null
        	            	  77:   )

        	            	"ipv6_cidr_blocks": conflicts with source_security_group_id

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0--1-true-0"],
        	            	  on ../../main.tf line 83, in resource "aws_security_group_rule" "egress":
        	            	  83:   self                     = try(each.value["self"], local.rules[lookup(each.value, "rule")]["self"], null)

        	            	"self": conflicts with cidr_blocks

        	            	Error: Conflicting configuration arguments

        	            	  with module.security_group.aws_security_group_rule.egress["0-icmp-sg-1111111111111111-0"],
        	            	  on ../../main.tf line 84, in resource "aws_security_group_rule" "egress":
        	            	  84:   source_security_group_id = try(each.value["source_security_group_id"], local.rules[lookup(each.value, "rule")]["source_security_group_id"], null)

        	            	"source_security_group_id": conflicts with cidr_blocks}
        	Test:       	TestTerraformCustomerRulesExample
--- FAIL: TestTerraformCustomerRulesExample (9.33s)
FAIL
FAIL	command-line-arguments	9.350s
FAIL
