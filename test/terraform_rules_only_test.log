=== RUN   TestTerraformRulesOnlyExample
TestTerraformRulesOnlyExample 2022-09-28T22:42:28Z retry.go:91: terraform [init -upgrade=false]
TestTerraformRulesOnlyExample 2022-09-28T22:42:28Z logger.go:66: Running command terraform with args [init -upgrade=false]
TestTerraformRulesOnlyExample 2022-09-28T22:42:28Z logger.go:66: [0m[1mInitializing modules...[0m
TestTerraformRulesOnlyExample 2022-09-28T22:42:28Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:28Z logger.go:66: [0m[1mInitializing the backend...[0m
TestTerraformRulesOnlyExample 2022-09-28T22:42:29Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:29Z logger.go:66: [0m[1mInitializing provider plugins...[0m
TestTerraformRulesOnlyExample 2022-09-28T22:42:29Z logger.go:66: - Reusing previous version of hashicorp/aws from the dependency lock file
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: - Using previously-installed hashicorp/aws v4.27.0
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: [0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: [0m[32m
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: You may now begin working with Terraform. Try running "terraform plan" to see
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: any changes that are required for your infrastructure. All Terraform commands
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: should now work.
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: If you ever set or change modules or backend configuration for Terraform,
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: rerun this command to reinitialize your working directory. If you forget, other
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: commands will detect it and remind you to do so if necessary.[0m
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z retry.go:91: terraform [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformRulesOnlyExample 2022-09-28T22:42:30Z logger.go:66: Running command terraform with args [apply -input=false -auto-approve -no-color -lock=false]
TestTerraformRulesOnlyExample 2022-09-28T22:42:33Z logger.go:66: data.aws_vpc.default: Reading...
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: data.aws_vpc.default: Read complete after 0s [id=vpc-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: data.aws_security_group.default: Reading...
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: data.aws_security_group.default: Read complete after 0s [id=sg-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: Terraform used the selected providers to generate the following execution
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: plan. Resource actions are indicated with the following symbols:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:   + create
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: Terraform will perform the following actions:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:   # module.pre_existing.aws_security_group.self[0] will be created
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:   + resource "aws_security_group" "self" {
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + arn                    = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + description            = "ex-rules-only-pre-existing"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + egress                 = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + id                     = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + ingress                = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + name                   = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + name_prefix            = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + owner_id               = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + revoke_rules_on_delete = false
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + tags_all               = {
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:           + "Example"    = "ex-rules-only"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:           + "GithubOrg"  = "aidanmelen"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:           + "GithubRepo" = "terraform-aws-security-group"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:         }
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + vpc_id                 = "vpc-1111111111111111"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + timeouts {
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:           + create = "10m"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:           + delete = "15m"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:         }
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:     }
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: Plan: 1 to add, 0 to change, 0 to destroy.
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66: Changes to Outputs:
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:   + egress    = []
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:   + ingress   = []
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:   + terratest = {
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + data_aws_security_group_default_id = "sg-1111111111111111"
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:       + pre_existing_security_group_id     = (known after apply)
TestTerraformRulesOnlyExample 2022-09-28T22:42:34Z logger.go:66:     }
TestTerraformRulesOnlyExample 2022-09-28T22:42:36Z logger.go:66: module.pre_existing.aws_security_group.self[0]: Creating...
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: module.pre_existing.aws_security_group.self[0]: Creation complete after 2s [id=sg-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: Outputs:
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: egress = []
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: ingress = []
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: terratest = {
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66:   "data_aws_security_group_default_id" = "sg-1111111111111111"
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66:   "pre_existing_security_group_id" = "sg-1111111111111111"
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: }
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z retry.go:91: terraform [output -no-color -json ingress]
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: Running command terraform with args [output -no-color -json ingress]
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: []
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z retry.go:91: terraform [output -no-color -json egress]
TestTerraformRulesOnlyExample 2022-09-28T22:42:38Z logger.go:66: Running command terraform with args [output -no-color -json egress]
TestTerraformRulesOnlyExample 2022-09-28T22:42:39Z logger.go:66: []
TestTerraformRulesOnlyExample 2022-09-28T22:42:39Z retry.go:91: terraform [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformRulesOnlyExample 2022-09-28T22:42:39Z logger.go:66: Running command terraform with args [destroy -auto-approve -input=false -no-color -lock=false]
TestTerraformRulesOnlyExample 2022-09-28T22:42:42Z logger.go:66: data.aws_vpc.default: Reading...
TestTerraformRulesOnlyExample 2022-09-28T22:42:43Z logger.go:66: data.aws_vpc.default: Read complete after 1s [id=vpc-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:43Z logger.go:66: data.aws_security_group.default: Reading...
TestTerraformRulesOnlyExample 2022-09-28T22:42:43Z logger.go:66: module.pre_existing.aws_security_group.self[0]: Refreshing state... [id=sg-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:43Z logger.go:66: data.aws_security_group.default: Read complete after 0s [id=sg-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66: Terraform used the selected providers to generate the following execution
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66: plan. Resource actions are indicated with the following symbols:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:   - destroy
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66: Terraform will perform the following actions:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:   # module.pre_existing.aws_security_group.self[0] will be destroyed
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:   - resource "aws_security_group" "self" {
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - arn                    = "arn:aws:ec2:us-west-2:111111111111:security-group/sg-1111111111111111" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - description            = "ex-rules-only-pre-existing" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - egress                 = [] -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - id                     = "sg-1111111111111111" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - ingress                = [] -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - name                   = "terraform-11111111111111111111111101" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - name_prefix            = "terraform-" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - owner_id               = "111111111111" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - revoke_rules_on_delete = false -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - tags                   = {} -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - tags_all               = {
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:           - "Example"    = "ex-rules-only"
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:           - "GithubOrg"  = "aidanmelen"
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:           - "GithubRepo" = "terraform-aws-security-group"
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:         } -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - vpc_id                 = "vpc-1111111111111111" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - timeouts {
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:           - create = "10m" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:           - delete = "15m" -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:         }
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:     }
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66: Plan: 0 to add, 0 to change, 1 to destroy.
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66: Changes to Outputs:
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:   - egress    = [] -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:   - ingress   = [] -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:   - terratest = {
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - data_aws_security_group_default_id = "sg-1111111111111111"
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:       - pre_existing_security_group_id     = "sg-1111111111111111"
TestTerraformRulesOnlyExample 2022-09-28T22:42:44Z logger.go:66:     } -> null
TestTerraformRulesOnlyExample 2022-09-28T22:42:45Z logger.go:66: module.pre_existing.aws_security_group.self[0]: Destroying... [id=sg-1111111111111111]
TestTerraformRulesOnlyExample 2022-09-28T22:42:46Z logger.go:66: module.pre_existing.aws_security_group.self[0]: Destruction complete after 1s
TestTerraformRulesOnlyExample 2022-09-28T22:42:46Z logger.go:66:
TestTerraformRulesOnlyExample 2022-09-28T22:42:46Z logger.go:66: Destroy complete! Resources: 1 destroyed.
--- FAIL: TestTerraformRulesOnlyExample (17.99s)
panic: runtime error: index out of range [0] with length 0 [recovered]
	panic: runtime error: index out of range [0] with length 0

goroutine 7 [running]:
testing.tRunner.func1.2({0xcbee40, 0xc000039470})
	/usr/local/go/src/testing/testing.go:1209 +0x24e
testing.tRunner.func1()
	/usr/local/go/src/testing/testing.go:1212 +0x218
panic({0xcbee40, 0xc000039470})
	/usr/local/go/src/runtime/panic.go:1038 +0x215
command-line-arguments.TestTerraformRulesOnlyExample(0xc0003d9a00)
	/workspaces/terraform-aws-security-group-v2/test/terraform_rules_only_test.go:33 +0x56f
testing.tRunner(0xc0003d9a00, 0xd4efe0)
	/usr/local/go/src/testing/testing.go:1259 +0x102
created by testing.(*T).Run
	/usr/local/go/src/testing/testing.go:1306 +0x35a
FAIL	command-line-arguments	18.004s
FAIL
